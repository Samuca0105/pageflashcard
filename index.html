<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Anota√ß√µes para Concursos</title>
    <style type="text/css">
        body {
            font-family: Arial, Helvetica, sans-serif;
            background-color: #f0f0f0;
            margin: 0;
            padding: 10px;
            color: #333;
        }

        .container {
            width: 95%;
            max-width: 800px;
            margin: 0 auto;
            background-color: white;
            border: 2px solid #ccc;
            border-radius: 10px;
        }

        .header {
            background-color: #4a90e2;
            color: white;
            padding: 20px;
            text-align: center;
            border-radius: 8px 8px 0 0;
        }

        .header h1 {
            font-size: 24px;
            margin: 0 0 10px 0;
        }

        .header p {
            font-size: 16px;
            margin: 0;
        }

        .controls {
            padding: 15px;
            background-color: #f8f8f8;
            border-bottom: 1px solid #ddd;
        }

        .form-group {
            margin-bottom: 15px;
        }

        .form-group label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
            color: #333;
        }

        .form-group input, .form-group textarea {
            width: 100%;
            padding: 8px;
            border: 1px solid #ccc;
            border-radius: 4px;
            font-size: 16px;
            font-family: Arial, sans-serif;
        }

        .btn {
            background-color: #4a90e2;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 4px;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
        }

        .btn:hover {
            background-color: #357abd;
        }

        .search-box {
            padding: 15px;
            background-color: #f8f8f8;
            border-bottom: 1px solid #ddd;
        }

        .search-box input {
            width: 100%;
            padding: 8px;
            border: 1px solid #ccc;
            border-radius: 4px;
            font-size: 16px;
        }

        .stats {
            background-color: #e8e8e8;
            padding: 10px;
            text-align: center;
            font-weight: bold;
            color: #333;
            border-bottom: 1px solid #ddd;
        }

        .notes-container {
            padding: 15px;
            max-height: 400px;
            overflow-y: auto;
        }

        .materia-group {
            margin-bottom: 25px;
            border: 1px solid #ddd;
            border-radius: 6px;
            overflow: hidden;
        }

        .materia-header {
            background-color: #4a90e2;
            color: white;
            padding: 12px 15px;
            font-size: 18px;
            font-weight: bold;
            cursor: pointer;
        }

        .materia-header:hover {
            background-color: #357abd;
        }

        .materia-content {
            background-color: white;
        }

        .materia-content.collapsed {
            display: none;
        }

        .note {
            background-color: #f8f8f8;
            border-left: 4px solid #4a90e2;
            margin: 10px;
            padding: 15px;
            border-radius: 4px;
        }

        .note-header {
            margin-bottom: 10px;
        }

        .note-assunto {
            font-size: 16px;
            color: #666;
            font-weight: bold;
            margin-bottom: 5px;
        }

        .note-date {
            font-size: 14px;
            color: #999;
        }

        .note-text {
            line-height: 1.5;
            color: #333;
            font-size: 16px;
        }

        .delete-btn {
            background-color: #dc3545;
            color: white;
            border: none;
            padding: 5px 10px;
            border-radius: 3px;
            font-size: 14px;
            cursor: pointer;
            float: right;
        }

        .delete-btn:hover {
            background-color: #c82333;
        }

        .empty-state {
            text-align: center;
            padding: 40px 20px;
            color: #666;
        }

        .empty-state div {
            font-size: 48px;
            margin-bottom: 20px;
        }

        .clear {
            clear: both;
        }

        /* Estilos para iPad Mini */
        @media screen and (max-width: 768px) {
            body {
                padding: 5px;
            }
            
            .header h1 {
                font-size: 20px;
            }
            
            
            
            .note-assunto {
                font-size: 14px;
            }
            
            .note-text {
                font-size: 14px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>Anota√ß√µes para Concursos</h1>
            <p>Organize seus estudos de forma eficiente</p>
        </div>

        <div class="controls">
            <div class="form-group">
                <label for="materia">Mat√©ria:</label>
                <input type="text" id="materia" placeholder="Ex: Arquivologia, Direito Constitucional...">
            </div>
            
            <div class="form-group">
                <label for="assunto">Assunto:</label>
                <input type="text" id="assunto" placeholder="Ex: T√©cnicas de arquivamento, Princ√≠pios constitucionais...">
            </div>
            
            <div class="form-group">
                <label for="texto">Anota√ß√£o:</label>
                <textarea id="texto" rows="4" placeholder="Digite sua anota√ß√£o aqui..."></textarea>
            </div>
            
            <button class="btn" onclick="adicionarAnotacao()">Adicionar Anota√ß√£o</button>
        </div>

        <div class="search-box">
            <input type="text" id="searchInput" placeholder="Buscar nas anota√ß√µes..." onkeyup="filtrarAnotacoes()">
        </div>

        <div class="stats" id="stats">
            Total de anota√ß√µes: 0
        </div>

        <div class="notes-container" id="notesContainer">
            <!-- As anota√ß√µes ser√£o inseridas aqui -->
        </div>
    </div>

    <script type="text/javascript">
        // Array para armazenar as anota√ß√µes
        var anotacoes = [];

        // Fun√ß√£o para adicionar uma nova anota√ß√£o
        function adicionarAnotacao() {
            var materia = document.getElementById('materia').value;
            var assunto = document.getElementById('assunto').value;
            var texto = document.getElementById('texto').value;
            
            // Remover espa√ßos em branco
            materia = materia.replace(/^\s+|\s+$/g, '');
            assunto = assunto.replace(/^\s+|\s+$/g, '');
            texto = texto.replace(/^\s+|\s+$/g, '');

            if (materia == '' || assunto == '' || texto == '') {
                alert('Por favor, preencha todos os campos!');
                return;
            }

            var anotacao = {
                id: new Date().getTime(),
                materia: materia,
                assunto: assunto,
                texto: texto,
                data: new Date().toLocaleDateString('pt-BR')
            };

            anotacoes.push(anotacao);
            salvarAnotacoes();
            limparFormulario();
            exibirAnotacoes();
            atualizarEstatisticas();
        }

        // Fun√ß√£o para limpar o formul√°rio
        function limparFormulario() {
            document.getElementById('materia').value = '';
            document.getElementById('assunto').value = '';
            document.getElementById('texto').value = '';
        }

        // Fun√ß√£o para exibir todas as anota√ß√µes agrupadas por mat√©ria
        function exibirAnotacoes(filtradas) {
            var container = document.getElementById('notesContainer');
            var anotacoesParaExibir = filtradas || anotacoes;

            if (anotacoesParaExibir.length == 0) {
                container.innerHTML = '<div class="empty-state"><div>üìù</div><h3>Nenhuma anota√ß√£o encontrada</h3><p>Adicione sua primeira anota√ß√£o para come√ßar!</p></div>';
                return;
            }

            // Agrupar anota√ß√µes por mat√©ria
            var materias = {};
            for (var i = 0; i < anotacoesParaExibir.length; i++) {
                var anotacao = anotacoesParaExibir[i];
                if (!materias[anotacao.materia]) {
                    materias[anotacao.materia] = [];
                }
                materias[anotacao.materia].push(anotacao);
            }

            var html = '';
            var materiaIndex = 0;
            for (var materia in materias) {
                if (materias.hasOwnProperty(materia)) {
                    var anotacoesMateria = materias[materia];
                    var materiaId = 'materia-' + materiaIndex;
                    
                    html += '<div class="materia-group">';
                    html += '<div class="materia-header" onclick="toggleMateria(\'' + materiaId + '\')">';
                    html += materia + ' (' + anotacoesMateria.length + ' anota√ß√µes)';
                    html += '</div>';
                    html += '<div class="materia-content" id="' + materiaId + '">';
                    
                    for (var j = 0; j < anotacoesMateria.length; j++) {
                        var anotacao = anotacoesMateria[j];
                        html += '<div class="note">';
                        html += '<div class="note-header">';
                        html += '<div class="note-meta">';
                        html += '<div class="note-assunto">' + anotacao.assunto + '</div>';
                        html += '<div class="note-date">' + anotacao.data + '</div>';
                        html += '</div>';
                        html += '<button class="delete-btn" onclick="deletarAnotacao(' + anotacao.id + ')">X</button>';
                        html += '<div class="clear"></div>';
                        html += '</div>';
                        html += '<div class="note-text">' + anotacao.texto + '</div>';
                        html += '</div>';
                    }
                    
                    html += '</div>';
                    html += '</div>';
                    materiaIndex++;
                }
            }
            container.innerHTML = html;
        }

        // Fun√ß√£o para expandir/colapsar grupos de mat√©ria
        function toggleMateria(materiaId) {
            var content = document.getElementById(materiaId);
            if (content.className.indexOf('collapsed') != -1) {
                content.className = content.className.replace(' collapsed', '');
            } else {
                content.className += ' collapsed';
            }
        }

        // Fun√ß√£o para deletar uma anota√ß√£o
        function deletarAnotacao(id) {
            if (confirm('Tem certeza que deseja deletar esta anota√ß√£o?')) {
                var novasAnotacoes = [];
                for (var i = 0; i < anotacoes.length; i++) {
                    if (anotacoes[i].id != id) {
                        novasAnotacoes.push(anotacoes[i]);
                    }
                }
                anotacoes = novasAnotacoes;
                salvarAnotacoes();
                exibirAnotacoes();
                atualizarEstatisticas();
            }
        }

        // Fun√ß√£o para filtrar anota√ß√µes
        function filtrarAnotacoes() {
            var termo = document.getElementById('searchInput').value.toLowerCase();
            var filtradas = [];
            
            for (var i = 0; i < anotacoes.length; i++) {
                var anotacao = anotacoes[i];
                if (anotacao.materia.toLowerCase().indexOf(termo) != -1 ||
                    anotacao.assunto.toLowerCase().indexOf(termo) != -1 ||
                    anotacao.texto.toLowerCase().indexOf(termo) != -1) {
                    filtradas.push(anotacao);
                }
            }
            exibirAnotacoes(filtradas);
        }

        // Fun√ß√£o para atualizar estat√≠sticas
        function atualizarEstatisticas() {
            var stats = document.getElementById('stats');
            stats.innerHTML = 'Total de anota√ß√µes: ' + anotacoes.length;
        }

        // Fun√ß√£o para salvar anota√ß√µes no arquivo JSON
        function salvarAnotacoes() {
            try {
                // Salvar no localStorage como backup
                localStorage.setItem('anotacoesConcursos', JSON.stringify(anotacoes));
                
                // Criar e baixar arquivo JSON para sincroniza√ß√£o
                var dataStr = JSON.stringify(anotacoes, null, 2);
                var dataBlob = new Blob([dataStr], {type: 'application/json'});
                
                // Criar link de download
                var link = document.createElement('a');
                link.href = URL.createObjectURL(dataBlob);
                link.download = 'anotacoes.json';
                link.style.display = 'none';
                document.body.appendChild(link);
                link.click();
                document.body.removeChild(link);
                
                // Mostrar instru√ß√µes para o usu√°rio
                alert('Arquivo anotacoes.json foi baixado!\n\nPara sincronizar:\n1. Substitua o arquivo anotacoes.json no seu reposit√≥rio\n2. Fa√ßa commit e push no GitHub\n3. Em outros dispositivos, fa√ßa pull para atualizar');
                
            } catch (e) {
                console.log('Erro ao salvar anota√ß√µes');
                alert('Erro ao salvar. Tente novamente.');
            }
        }

        // Fun√ß√£o para carregar anota√ß√µes do arquivo JSON
        function carregarAnotacoes() {
            try {
                // Primeiro tenta carregar do localStorage como backup
                var salvas = localStorage.getItem('anotacoesConcursos');
                if (salvas) {
                    anotacoes = JSON.parse(salvas);
                }
                
                // Depois tenta carregar do arquivo JSON se existir
                var xhr = new XMLHttpRequest();
                xhr.open('GET', 'anotacoes.json', true);
                xhr.onreadystatechange = function() {
                    if (xhr.readyState == 4) {
                        if (xhr.status == 200) {
                            try {
                                var dadosArquivo = JSON.parse(xhr.responseText);
                                if (dadosArquivo && dadosArquivo.length > 0) {
                                    anotacoes = dadosArquivo;
                                    // Atualizar localStorage com dados do arquivo
                                    localStorage.setItem('anotacoesConcursos', JSON.stringify(anotacoes));
                                    exibirAnotacoes();
                                    atualizarEstatisticas();
                                }
                            } catch (e) {
                                console.log('Erro ao parsear arquivo JSON');
                            }
                        } else {
                            console.log('Arquivo anotacoes.json n√£o encontrado, usando localStorage');
                        }
                    }
                };
                xhr.send();
                
            } catch (e) {
                console.log('Erro ao carregar anota√ß√µes');
                anotacoes = [];
            }
        }

        // Inicializa√ß√£o da aplica√ß√£o
        window.onload = function() {
            carregarAnotacoes();
            exibirAnotacoes();
            atualizarEstatisticas();
        };
    </script>
</body>
</html> 